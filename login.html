{% extends 'base.html' %}
{% block title %}Login{% endblock %}
{% block sidebar %}{% endblock %}
{% block header %}{% endblock %}
{% block content %}
<div style="display:flex;justify-content:center;align-items:center;height:100vh;width:100vw;position:fixed;top:0;left:0;background:linear-gradient(135deg,#f9f9fb,#eef1f7);">
    <div style="padding:32px;max-width:420px;width:100%;">
        <h2 style="text-align:center;font-weight:700;color:#283593;margin-bottom:24px;">
            <span style="font-size:1.4em;">üîë</span> Sign In
        </h2>

        {% if error %}
        <div style="background:#e53935;color:#fff;padding:10px;border-radius:6px;text-align:center;margin-bottom:18px;font-weight:500;">
            {{ error }}
        </div>
        {% endif %}

        <form method="post" id="login-form" autocomplete="off">
            <!-- Username with external emoji -->
            <label for="username" style="display:block;margin-bottom:6px;font-weight:600;">Username</label>
            <div style="display:flex;align-items:center;margin-bottom:16px;gap:10px;">
                    <span style="background:#f9f9fb;border:1px solid #ccc;border-radius:8px 0 0 8px;padding:10px 12px 10px 16px;color:#3f51b5;font-size:1em;display:flex;align-items:center;">üë§</span>
                    <input type="text" id="username" name="username" placeholder="Enter username" required 
                        style="border:1px solid #ccc;border-radius:0 8px 8px 0;padding:10px;font-size:1em;width:100%;margin-left:-1px;">
            </div>

            <!-- Password with external emoji -->
            <label for="password" style="display:block;margin-bottom:6px;font-weight:600;">Password</label>
            <div style="display:flex;align-items:center;margin-bottom:16px;gap:10px;">
                    <span style="background:#f9f9fb;border:1px solid #ccc;border-radius:8px 0 0 8px;padding:10px 12px 10px 16px;color:#3f51b5;font-size:1em;display:flex;align-items:center;">üîí</span>
                    <input type="password" id="password" name="password" placeholder="Enter password" required 
                        style="border:1px solid #ccc;border-radius:0 8px 8px 0;padding:10px;font-size:1em;width:100%;margin-left:-1px;">
                    <button type="button" id="toggle-password" 
                        style="background:none;border:none;cursor:pointer;font-size:1.1em;color:#3f51b5;margin-left:-36px;z-index:2;">
                        üëÅ
                    </button>
            </div>

            <!-- Login button -->
            <button type="submit" id="login-btn" 
                style="background:#3f51b5;color:#fff;font-weight:700;font-size:1.1em;padding:12px 0;border:none;border-radius:8px;width:100%;cursor:pointer;transition:0.3s;">
                Login
            </button>

            <!-- Spinner -->
            <div id="login-spinner" style="display:none;text-align:center;margin-top:14px;">
                <span style="display:inline-block;width:24px;height:24px;border:3px solid #3f51b5;border-top:3px solid #fff;border-radius:50%;animation:spin 1s linear infinite;"></span>
            </div>
        </form>

        <!-- Styles -->
        <style>
            @keyframes spin { 
                to { transform: rotate(360deg); } 
            }
            input:focus { 
                border-color: #3f51b5; 
                box-shadow: 0 0 6px rgba(63,81,181,0.3); 
                outline: none; 
            }
            button:hover { 
                background: #283593; 
            }
            #toggle-password:hover { 
                color: #1a237e; 
            }
        </style>

        <!-- Scripts -->
        <script>
            // Toggle password visibility
            document.getElementById('toggle-password').addEventListener('click', function () {
                const pwd = document.getElementById('password');
                if (pwd.type === 'password') {
                    pwd.type = 'text';
                    this.textContent = 'üôà';
                } else {
                    pwd.type = 'password';
                    this.textContent = 'üëÅ';
                }
            });

            // Show spinner on form submit
            document.getElementById('login-form').addEventListener('submit', function () {
                document.getElementById('login-btn').disabled = true;
                document.getElementById('login-btn').textContent = 'Logging in...';
                document.getElementById('login-spinner').style.display = 'block';
            });
        </script>
    </div>
</div>
{% endblock %}