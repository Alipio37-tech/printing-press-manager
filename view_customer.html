{% extends 'base.html' %}
{% block title %}View Customer{% endblock %}
{% block header %}View Customer{% endblock %}
{% block content %}
    <!-- Add Customer Modal -->
    <div id="customerModal" class="modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.15);z-index:1000;align-items:center;justify-content:center;">
        <div class="form-section" style="max-width:500px;margin:auto;box-shadow:0 4px 24px rgba(0,0,0,0.12);position:relative;">
            <button onclick="closeCustomerModal()" style="position:absolute;top:18px;right:18px;background:none;border:none;font-size:1.5em;color:#888;cursor:pointer;">&times;</button>
            <h2 style="margin-top:10px;">Add Customer</h2>
            <form method="post" class="styled-form">
                <input type="text" name="name" placeholder="Customer Name" required>
                <!-- Removed Contact Info field -->
                <input type="text" name="mobile" placeholder="Mobile" required>
                <input type="email" name="email" placeholder="Email" required>
                <input type="text" name="address" placeholder="Address" required>
                <button type="submit" style="background:#3f51b5;font-weight:700;font-size:1.1em;">Add Customer</button>
            </form>
        </div>
    </div>
    <div class="table-section">
        <h2 style="margin-bottom:0;">Customer List</h2>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;">
            <span style="font-weight:500;">{{ customers|length }} Records Found.</span>
            <a href="#" onclick="openCustomerModal();return false;" style="padding:8px 16px;background:#1976d2;color:#fff;border:none;border-radius:5px;text-decoration:none;">Add Customer</a>
        </div>
        <table style="border-collapse:collapse;width:100%;">
            <tr style="background:#1976d2;color:#fff;">
                <th style="padding:12px;">ID</th>
                <th style="padding:12px;">Name</th>
                <th style="padding:12px;">Mobile</th>
                <th style="padding:12px;">Email</th>
                <th style="padding:12px;">Address</th>
                <th style="padding:12px;">Actions</th>
            </tr>
            {% for customer in customers %}
            {% if loop.index0 % 2 == 0 %}
            <tr style="background:#f9f9f9;">
            {% else %}
            <tr style="background:#fff;">
            {% endif %}
                <td style="padding:12px;">{{ customer[0] }}</td>
                <td style="padding:12px;">{{ customer[1] }}</td>
                <td style="padding:12px;">{{ customer[3] }}</td>
                <td style="padding:12px;">{{ customer[4] }}</td>
                <td style="padding:12px;">{{ customer[5] }}</td>
                <td style="padding:12px;">
                    <a href="/edit_customer/{{ customer[0] }}" style="margin-right:8px;color:#1976d2;text-decoration:underline;">Edit</a>
                    <a href="/customer_details/{{ customer[0] }}" style="margin-right:8px;color:#388e3c;text-decoration:underline;">Details</a>
                    <form action="/delete_customer/{{ customer[0] }}" method="post" style="display:inline;">
                        <button type="submit" onclick="return confirm('Delete this customer?');" style="color:#e53935;background:none;border:none;cursor:pointer;text-decoration:underline;">Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
<script>
function openCustomerModal() {
    document.getElementById('customerModal').style.display = 'flex';
}
function closeCustomerModal() {
    document.getElementById('customerModal').style.display = 'none';
}
</script>
{% endblock %}
